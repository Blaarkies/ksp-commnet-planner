<svg class="signal-line"
     xmlns="http://www.w3.org/2000/svg"
>
  <line [attr.stroke-width]="2"
        [attr.stroke]="antennaSignal.colorTotal + 'A'"
        [attr.x1]="worldViewScale * antennaSignal.nodes[0].location.x + inverseScale * antennaSignal.offsetVector.x + '%'"
        [attr.y1]="worldViewScale * antennaSignal.nodes[0].location.y + inverseScale * antennaSignal.offsetVector.y + '%'"
        [attr.x2]="worldViewScale * antennaSignal.nodes[1].location.x + inverseScale * antennaSignal.offsetVector.x + '%'"
        [attr.y2]="worldViewScale * antennaSignal.nodes[1].location.y + inverseScale * antennaSignal.offsetVector.y + '%'"
  />

  <defs *ngIf="antennaSignal.strengthRelay">
    <pattern [attr.id]="'pattern' + antennaSignal.id"
             patternUnits="userSpaceOnUse"
             width="10"
             height="10"
             [attr.patternTransform]="'rotate(' + (antennaSignal.angleDeg + 90) + ')'">
      <line class="animate-data-travelling"
            x1="0" y1="2.5" x2="10" y2="2.5"
            [attr.stroke]="antennaSignal.colorRelay + 'A'"
            stroke-width="5"></line>
    </pattern>
  </defs>

  <line *ngIf="antennaSignal.strengthRelay"
        [attr.stroke-width]="3"
        [attr.stroke]="'url(#pattern' + antennaSignal.id + ')'"
        [attr.x1]="worldViewScale * antennaSignal.nodes[0].location.x - inverseScale * antennaSignal.offsetVector.x + '%'"
        [attr.y1]="worldViewScale * antennaSignal.nodes[0].location.y - inverseScale * antennaSignal.offsetVector.y + '%'"
        [attr.x2]="worldViewScale * antennaSignal.nodes[1].location.x - inverseScale * antennaSignal.offsetVector.x + '%'"
        [attr.y2]="worldViewScale * antennaSignal.nodes[1].location.y - inverseScale * antennaSignal.offsetVector.y + '%'"
  />

  <foreignObject width="100%"
                 height="100%"
                 class="signal-strength"
                 [attr.x]="worldViewScale * antennaSignal.textLocation.x + '%'"
                 [attr.y]="worldViewScale * antennaSignal.textLocation.y + '%'">
    <span xmlns="http://www.w3.org/1999/xhtml"
          [@fade]
          *ngIf="(antennaSignal.nodes[0].draggableHandle.isHover$ | async)
                  || (antennaSignal.nodes[1].draggableHandle.isHover$ | async)"
          class="distance-text">
      {{antennaSignal.strengthTotal * 100 | number : '.0-0'}}%
      &nbsp;
      {{antennaSignal.displayDistance}}
    </span>
  </foreignObject>
</svg>
