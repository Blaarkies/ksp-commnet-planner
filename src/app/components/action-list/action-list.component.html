<mat-list [class.right-justified]="justifyRight">

  <ng-container *ngFor="let option of options"
                [ngSwitch]="option.type">
    <ng-template #button>
      <ng-container *ngIf="option.unavailableMeta?.unavailable$ | async;
                               else normal">
        <div class="action-button unavailable"
             [matTooltip]="option.unavailableMeta.tooltip"
             [matTooltipPosition]="'right'"
             (click)="$event.stopPropagation(); option.unavailableMeta.action()">
          <span class="text-white">{{option.label}}</span>
          <span matBadgeColor="warn"
                [matBadgeHidden]="!option.unread"
                matBadge="!"></span>
          <mat-icon [svgIcon]="option.icon"></mat-icon>
        </div>
      </ng-container>

      <ng-template #normal>
        <div class="action-button"
             [matTooltip]="option.tooltip"
             [matTooltipPosition]="'right'">
          <span class="text-white">{{option.label}}</span>
          <span matBadgeColor="warn"
                [matBadgeHidden]="!option.unread"
                matBadge="!"></span>
          <mat-icon [svgIcon]="option.icon"></mat-icon>
        </div>
      </ng-template>
    </ng-template>

    <mat-list-item *ngSwitchCase="actionTypes.Divider" class="divider-list-option">
      <hr />
    </mat-list-item>

    <mat-list-item *ngSwitchCase="actionTypes.Action"
                   (click)="action.emit();
                              option.actionMeta.action();
                              updateUnreads(option)">
      <ng-container *ngTemplateOutlet="button"></ng-container>
    </mat-list-item>

    <mat-list-item *ngSwitchCase="actionTypes.Route"
                   (click)="action.emit();
                              updateUnreads(option);
                              logRoute(option.actionMeta.route)"
                   routerLink="/{{option.actionMeta.route}}">
      <ng-container *ngTemplateOutlet="button"></ng-container>
    </mat-list-item>

    <mat-list-item *ngSwitchCase="actionTypes.ExternalRoute"
                   (click)="action.emit();
                              updateUnreads(option);
                              logExternalLink(option.actionMeta.externalRoute)">
      <a class="anchor-invisible"
         [href]="option.actionMeta.externalRoute"
         target="_blank">
        <ng-container *ngTemplateOutlet="button"></ng-container>
      </a>
    </mat-list-item>

  </ng-container>
</mat-list>
